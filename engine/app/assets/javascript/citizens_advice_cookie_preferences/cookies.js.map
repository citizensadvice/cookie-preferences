{
  "version": 3,
  "sources": ["../../../javascript/citizens_advice_cookie_preferences/components/cookie-banner.js", "../../../javascript/citizens_advice_cookie_preferences/cookies.js"],
  "sourcesContent": ["const selectors = {\n  cookieBanner: \".js-cookie-banner\",\n  acceptBtn: \"#js-cookie-banner__button-accept\",\n  rejectBtn: \"#js-cookie-banner__button-reject\",\n  cookieSelectionContainer: \".js-cookie-banner__selection-container\",\n  confirmationMessageContainer: \".js-cookie-banner__confirmation-message\",\n  confirmationMessageAccept: \".js-cookie-banner__confirmation-accept\",\n  confirmationMessageReject: \".js-cookie-banner__confirmation-reject\",\n  hideBannerBtn: \"#js-cookie-banner__button-hide\",\n};\n\nconst DEFAULT_COOKIE_CONSENT = {\n  essential: true,\n  analytics: false,\n  video_players: false,\n};\n\nconst cookieDomain =\n  document.location.hostname === \"localhost\"\n    ? \"localhost\"\n    : \"citizensadvice.org.uk\";\n\nfunction setCookie(cname, cvalue, exdays) {\n  // set expiry date in milliseconds\n  const d = new Date();\n  d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\n  let expires = \"expires=\" + d.toUTCString();\n  document.cookie =\n    cname +\n    \"=\" +\n    cvalue +\n    \";\" +\n    expires +\n    \";path=/\" +\n    `;domain=${cookieDomain}`;\n}\n\nfunction getCookie(name) {\n  const nameEQ = `${name}=`;\n  const cookies = document.cookie.split(\";\");\n  for (let i = 0, len = cookies.length; i < len; i++) {\n    let cookie = cookies[i];\n    while (cookie.charAt(0) === \" \") {\n      cookie = cookie.substring(1, cookie.length);\n    }\n    if (cookie.indexOf(nameEQ) === 0) {\n      return decodeURIComponent(cookie.substring(nameEQ.length));\n    }\n  }\n  return null;\n}\n\nconst acceptCookies = () => {\n  setCookie(\n    \"cookie_preference\",\n    encodeURIComponent(\n      JSON.stringify({\n        essential: true,\n        analytics: true,\n        video_players: true,\n      }),\n    ),\n    365,\n  );\n  setCookie(\"cookie_preference_set\", true, 365);\n  showConfirmationMessage();\n  document.querySelector(selectors.confirmationMessageAccept).hidden = false;\n};\n\nconst rejectCookies = () => {\n  setCookie(\n    \"cookie_preference\",\n    encodeURIComponent(JSON.stringify(DEFAULT_COOKIE_CONSENT)),\n    365,\n  );\n  setCookie(\"cookie_preference_set\", true, 365);\n  showConfirmationMessage();\n  document.querySelector(selectors.confirmationMessageReject).hidden = false;\n};\n\nfunction hideCookieBanner() {\n  const cookieBanner = document.querySelector(selectors.cookieBanner);\n  cookieBanner.hidden = true;\n}\n\nfunction showConfirmationMessage() {\n  const cookieBanner = document.querySelector(selectors.cookieBanner);\n\n  const confirmationMessageContainer = document.querySelector(\n    selectors.confirmationMessageContainer,\n  );\n  document.querySelector(selectors.cookieSelectionContainer).hidden = true;\n  confirmationMessageContainer.hidden = false;\n  confirmationMessageContainer.focus();\n  cookieBanner.classList.add(\"cookie-banner--no-decoration\");\n}\n\nfunction setDefaultCookies() {\n  if (getCookie(\"cookie_preference_set\")) {\n    hideCookieBanner();\n  } else {\n    const cookieBanner = document.querySelector(selectors.cookieBanner);\n    cookieBanner.hidden = false;\n    setCookie(\n      \"cookie_preference\",\n      encodeURIComponent(JSON.stringify(DEFAULT_COOKIE_CONSENT)),\n      365,\n    );\n  }\n}\n\nfunction addCookieBannerEventHandlers() {\n  document.querySelector(selectors.acceptBtn).addEventListener(\"click\", () => {\n    acceptCookies();\n  });\n\n  document.querySelector(selectors.rejectBtn).addEventListener(\"click\", () => {\n    rejectCookies();\n  });\n\n  document\n    .querySelector(selectors.hideBannerBtn)\n    .addEventListener(\"click\", () => {\n      hideCookieBanner();\n    });\n}\n\nexport default function initCookieBanner() {\n  setDefaultCookies();\n  addCookieBannerEventHandlers();\n}\n\n// need to add gtm classes to button in view, depending on cookie acceptance status\n\n// need datalayer push for accept & reject cookies\n\n// make confirmation banner accessible - e.g. focus or live region?\n", "import initCookieBanner from \"./components/cookie-banner\";\n\ninitCookieBanner();\n"],
  "mappings": "MAAA,IAAMA,EAAY,CAChB,aAAc,oBACd,UAAW,mCACX,UAAW,mCACX,yBAA0B,yCAC1B,6BAA8B,0CAC9B,0BAA2B,yCAC3B,0BAA2B,yCAC3B,cAAe,gCACjB,EAEMC,EAAyB,CAC7B,UAAW,GACX,UAAW,GACX,cAAe,EACjB,EAEMC,EACJ,SAAS,SAAS,WAAa,YAC3B,YACA,wBAEN,SAASC,EAAUC,EAAOC,EAAQC,EAAQ,CAExC,IAAMC,EAAI,IAAI,KACdA,EAAE,QAAQA,EAAE,QAAQ,EAAID,EAAS,GAAK,GAAK,GAAK,GAAI,EACpD,IAAIE,EAAU,WAAaD,EAAE,YAAY,EACzC,SAAS,OACPH,EACA,IACAC,EACA,IACAG,EACA,kBACWN,CAAY,EAC3B,CAEA,SAASO,EAAUC,EAAM,CACvB,IAAMC,EAAS,GAAGD,CAAI,IAChBE,EAAU,SAAS,OAAO,MAAM,GAAG,EACzC,QAASC,EAAI,EAAGC,EAAMF,EAAQ,OAAQC,EAAIC,EAAKD,IAAK,CAClD,IAAIE,EAASH,EAAQC,CAAC,EACtB,KAAOE,EAAO,OAAO,CAAC,IAAM,KAC1BA,EAASA,EAAO,UAAU,EAAGA,EAAO,MAAM,EAE5C,GAAIA,EAAO,QAAQJ,CAAM,IAAM,EAC7B,OAAO,mBAAmBI,EAAO,UAAUJ,EAAO,MAAM,CAAC,CAE7D,CACA,OAAO,IACT,CAEA,IAAMK,EAAgB,IAAM,CAC1Bb,EACE,oBACA,mBACE,KAAK,UAAU,CACb,UAAW,GACX,UAAW,GACX,cAAe,EACjB,CAAC,CACH,EACA,GACF,EACAA,EAAU,wBAAyB,GAAM,GAAG,EAC5Cc,EAAwB,EACxB,SAAS,cAAcjB,EAAU,yBAAyB,EAAE,OAAS,EACvE,EAEMkB,EAAgB,IAAM,CAC1Bf,EACE,oBACA,mBAAmB,KAAK,UAAUF,CAAsB,CAAC,EACzD,GACF,EACAE,EAAU,wBAAyB,GAAM,GAAG,EAC5Cc,EAAwB,EACxB,SAAS,cAAcjB,EAAU,yBAAyB,EAAE,OAAS,EACvE,EAEA,SAASmB,GAAmB,CAC1B,IAAMC,EAAe,SAAS,cAAcpB,EAAU,YAAY,EAClEoB,EAAa,OAAS,EACxB,CAEA,SAASH,GAA0B,CACjC,IAAMG,EAAe,SAAS,cAAcpB,EAAU,YAAY,EAE5DqB,EAA+B,SAAS,cAC5CrB,EAAU,4BACZ,EACA,SAAS,cAAcA,EAAU,wBAAwB,EAAE,OAAS,GACpEqB,EAA6B,OAAS,GACtCA,EAA6B,MAAM,EACnCD,EAAa,UAAU,IAAI,8BAA8B,CAC3D,CAEA,SAASE,GAAoB,CAC3B,GAAIb,EAAU,uBAAuB,EACnCU,EAAiB,MACZ,CACL,IAAMC,EAAe,SAAS,cAAcpB,EAAU,YAAY,EAClEoB,EAAa,OAAS,GACtBjB,EACE,oBACA,mBAAmB,KAAK,UAAUF,CAAsB,CAAC,EACzD,GACF,CACF,CACF,CAEA,SAASsB,GAA+B,CACtC,SAAS,cAAcvB,EAAU,SAAS,EAAE,iBAAiB,QAAS,IAAM,CAC1EgB,EAAc,CAChB,CAAC,EAED,SAAS,cAAchB,EAAU,SAAS,EAAE,iBAAiB,QAAS,IAAM,CAC1EkB,EAAc,CAChB,CAAC,EAED,SACG,cAAclB,EAAU,aAAa,EACrC,iBAAiB,QAAS,IAAM,CAC/BmB,EAAiB,CACnB,CAAC,CACL,CAEe,SAARK,GAAoC,CACzCF,EAAkB,EAClBC,EAA6B,CAC/B,CChIAE,EAAiB",
  "names": ["selectors", "DEFAULT_COOKIE_CONSENT", "cookieDomain", "setCookie", "cname", "cvalue", "exdays", "d", "expires", "getCookie", "name", "nameEQ", "cookies", "i", "len", "cookie", "acceptCookies", "showConfirmationMessage", "rejectCookies", "hideCookieBanner", "cookieBanner", "confirmationMessageContainer", "setDefaultCookies", "addCookieBannerEventHandlers", "initCookieBanner", "initCookieBanner"]
}
